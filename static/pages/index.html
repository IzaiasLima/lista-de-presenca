<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/static/css/style.css">
    <title>Tabela de Presença</title>

    <!-- <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f5f5f5;
        }

        table {
            border-collapse: collapse;
            width: 100%;
            max-width: 800px;
            margin: 0 auto;
            background-color: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th,
        td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: center;
        }

        th {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
        }

        td:first-child {
            text-align: left;
            font-weight: 500;
        }

        .present {
            color: #4CAF50;
            font-weight: bold;
        }

        .absent {
            color: #f44336;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        tr:hover {
            background-color: #f0f0f0;
        }

        .semana-atual {
            background-color: aqua;
        }
    </style> -->
</head>

<body>

    <div class="container">

        <div class="card">
            <div class="header">
                <h1>Frequência Semanal do NCC</h1>
                <img class="login" src="/static/images/exit.png" onclick="event.preventDefault(); logout();" alt="exit">
            </div>

            <div class="input-group">
                <input type="text" id="novoParticipante" placeholder="Nome do participante">
                <button class="btn primary" onclick="adicionarParticipante()">
                    <span>
                        <img class="login" src="/static/images/plus.png">
                    </span>
                    <span class="btn-label">
                        Adicionar
                    </span>
                </button>
            </div>

            <div class="navigation">
                <div class="semanas">
                    <div>
                        <label>Semana:</label>
                        <input type="number" id="semanaAtual" min="1" max="52" onchange="init()">
                        <span style="color: #6b7280;">&nbsp;de&nbsp;52</span>
                    </div>
                    <div class="btns-semanas">
                        <button class="btn primary" onchange="init()">Selecionar Semana</button>
                        <button class="btn primary" onclick="setSemanaAtual()">Exibir Semana Atual</button>
                    </div>
                </div>
            </div>



            <div id="loading" style="text-align: center; padding: 20px; color: #666;">
                Carregando dados...
            </div>
            <div id="error" style="display: none; text-align: center; padding: 20px; color: #f44336;">
                Erro ao carregar dados. Verifique se o servidor está rodando.
            </div>
            <table id="presenceTable" style="display: none;"></table>


            <div id="toast">
                <span id="message">
                    <!-- Mensagem de notificação -->
                </span>
            </div>


            <div id="estadoVazio" class="empty-state" style="display: none;">
                Adicione participantes para começar o controle de frequência
            </div>
        </div>

        <div class="instructions">
            <h2>Instruções:</h2>
            <ul>
                <li>• Adicione participantes usando o campo acima</li>
                <li>• Clique nas células para marcar presença (verde) ou ausência (cinza)</li>
                <li>• Use "Ir para semana" para navegar pelas 52 semanas</li>
                <li>• Apenas a semana atual (destacada com ★) pode ser editada</li>
                <li>• A linha "Total" mostra a soma de participantes presentes em cada semana</li>
                <li>• Exporte os dados em CSV para usar no Google Sheets</li>
            </ul>
        </div>
    </div>

    <script src="/static/js/auth.js"></script>
    <script>
        // Verifica autenticação antes de executar o script principal
        if (window.auth) {
            window.auth.requireLogin();
        }
    </script>
    <script src="/static/js/main.js"></script>
    <script src="/static/js/login.js"></script>
    <script src="/static/js/table.js"></script>


</body>

</html>